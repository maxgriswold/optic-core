---
title: "demo_optic"
author: "Max Griswold"
date: '2022-07-13'
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(data.table)
library(optic)
library(ggplot2)

```

## Preface

This notebook investigates the applied utility of the Optic package, which simulates causal inference estimators which use differencing approaches, on hypothetical treatment data and observed outcome data. I start by replicating the package vignette using example data, then replicate this vignette using my own applied data. I then attempt to extend the package to use an additional differencing method. This notebook collects tests and thoughts related to the package. Thoughts on the vignette are embedded as comments in the knitted PDF.

## Replicate vignette:

```{r}

data("example_data")

df <- setDT(example_data)

# we will define two scenarios for different effect magnitudes for
# the policies using 5, 10, and 15 percent changes in the outcome

linear5 <- 690 / ((sum(df$population) / length(unique(df$year))) / 100000)
linear10 <- 1380 / ((sum(df$population) / length(unique(df$year))) / 100000)
linear15 <- 2070 / ((sum(df$population) / length(unique(df$year))) / 100000)

scenario1 <- c(linear10, linear10)
scenario2 <- c(linear5, linear15)

my_models <- list(
  list(
    name="fixedeff_linear",
    type="reg",
    model_call="lm",
    model_formula = crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level,
    model_args=list(weights=as.name('population')),
    se_adjust=c("none")
  ),
  list(
    name="autoreg_linear",
    type="autoreg",
    model_call="lm",
    model_formula = crude.rate ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change,
    model_args=list(weights=as.name('population')),
    se_adjust=c("none")
  )
)

sim_config <- configure_simulation(
  x=df,
  models=my_models,
  iters=10,
  meth = "concurrent",

  params=list(
    unit_var="state",
    time_var="year",
    
    #Below are the linear effect chagnes occuring from a     hypothetical policy
    effect_magnitude=list(scenario1, scenario2),
    n_units=c(30),
    effect_direction=c("neg"),
    policy_speed=c("instant", "slow"),
    n_implementation_periods=c(3),
    rho=c(0.5),
    years_apart=2,
    ordered=TRUE
  )
)

lm_results <- dispatch_simulations(
    sim_config,
    use_future=TRUE,
    seed=9782,
    verbose=2,
    future.globals=c("cluster_adjust_se"),
    future.packages=c("dplyr", "optic")
)

```
Lots of info in the table. I'm adding a feature to summarize and plot results to the underlying package. See these scripts for more details.

```{r}

```
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 4 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 5 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 6 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 7 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 8 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 9 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 10 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 11 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 12 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 13 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 14 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 15 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 16 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 17 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 18 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 19 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 20 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 21 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 22 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 23 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 24 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 25 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 26 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 27 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 28 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 29 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 30 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 31 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 32 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 33 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 34 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 35 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 36 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 37 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 38 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 39 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 40 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
+   models=my_models,
+   iters=10,
+   
+   method_sample=concurrent_sample,
+   method_pre_model=concurrent_premodel,
+   method_model=concurrent_model,
+   method_post_model=concurrent_postmodel,
+   method_results=concurrent_results,
+   
+   params=list(
+     unit_var="state",
+     time_var="year",
+     effect_magnitude=list(scenario1, scenario2),
+     n_units=c(30),
+     effect_direction=c("null", "neg"),
+     policy_speed=c("instant", "slow"),
+     n_implementation_periods=c(3),
+     rhos=c(0, 0.25, 0.5, 0.75, 0.9),
+     years_apart=2,
+     ordered=TRUE
+   )
+ )
Number of Simulations: 40
Number of Models: 2
Iteration per Simulation : 10
Total number of Iterations to Run: 800
> 
> lm_results <- dispatch_simulations(
+     sim_config,
+     use_future=TRUE,
+     seed=9782,
+     verbose=2,
+     future.globals=c("cluster_adjust_se"),
+     future.packages=c("dplyr", "optic")
+ )
JOB 1 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 2 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 3 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 4 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 5 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 6 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 7 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 8 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0
            years_apart: 2
            ordered: TRUE
JOB 9 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 10 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 11 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 12 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 13 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 14 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 15 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 16 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.25
            years_apart: 2
            ordered: TRUE
JOB 17 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 18 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 19 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 20 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 21 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 22 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 23 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 24 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.5
            years_apart: 2
            ordered: TRUE
JOB 25 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 26 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 27 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 28 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 29 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 30 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 31 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 32 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.75
            years_apart: 2
            ordered: TRUE
JOB 33 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 34 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 35 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 36 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: instant
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 37 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 38 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: null
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 39 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.455092540172079
            effect_magnitude2: 0.455092540172079
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
JOB 40 OF 40 DISPATCHED:
        DISPATCH METHOD: parallel (future)
        PARAMS:
            unit_var: state
            time_var: year
            effect_magnitude1: 0.22754627008604
            effect_magnitude2: 0.682638810258119
            n_units: 30
            effect_direction: neg
            policy_speed: slow
            n_implementation_periods: 3
            rhos: 0.9
            years_apart: 2
            ordered: TRUE
> 
> lm_results
   effect_magnitude1 effect_magnitude2 n_units effect_direction policy_speed n_implementation_periods years_apart ordered se_adjustment    estimate1
1          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    1.2612750
2          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    1.2612750
3          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    1.2612750
4          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    1.2612750
5          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    1.2612750
6          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    0.4337421
7          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    0.4337421
8          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    0.4337421
9          0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    0.4337421
10         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none    0.4337421
11         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -523.6847699
12         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -523.6847699
13         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -523.6847699
14         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -523.6847699
15         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -523.6847699
16         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -764.0528518
17         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -764.0528518
18         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -764.0528518
19         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -764.0528518
20         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -764.0528518
21         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none   -1.4946850
22         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none   -1.4946850
23         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none   -1.4946850
24         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none   -1.4946850
25         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none   -1.4946850
26         0.2275463         0.6826388      30              neg      instant                        3           2    TRUE          none -807.3096881
           se1    variance1 test_stat1    p_value1     estimate2         se2    variance2  test_stat2   p_value2     joint.eff joint.eff.se
1    0.5353639 2.866145e-01  2.3559209 0.018693361   -0.02110765   0.5258405 2.765082e-01 -0.04014079 0.96798990     1.2401673    0.6410863
2    0.5353639 2.866145e-01  2.3559209 0.018693361   -0.02110765   0.5258405 2.765082e-01 -0.04014079 0.96798990     1.2401673    0.6410863
3    0.5353639 2.866145e-01  2.3559209 0.018693361   -0.02110765   0.5258405 2.765082e-01 -0.04014079 0.96798990     1.2401673    0.6410863
4    0.5353639 2.866145e-01  2.3559209 0.018693361   -0.02110765   0.5258405 2.765082e-01 -0.04014079 0.96798990     1.2401673    0.6410863
5    0.5353639 2.866145e-01  2.3559209 0.018693361   -0.02110765   0.5258405 2.765082e-01 -0.04014079 0.96798990     1.2401673    0.6410863
6    0.4944583 2.444890e-01  0.8772067 0.380611648    0.30915549   0.5019245 2.519282e-01  0.61594019 0.53809183     0.7428976    0.6438511
7    0.4944583 2.444890e-01  0.8772067 0.380611648    0.30915549   0.5019245 2.519282e-01  0.61594019 0.53809183     0.7428976    0.6438511
8    0.4944583 2.444890e-01  0.8772067 0.380611648    0.30915549   0.5019245 2.519282e-01  0.61594019 0.53809183     0.7428976    0.6438511
9    0.4944583 2.444890e-01  0.8772067 0.380611648    0.30915549   0.5019245 2.519282e-01  0.61594019 0.53809183     0.7428976    0.6438511
10   0.4944583 2.444890e-01  0.8772067 0.380611648    0.30915549   0.5019245 2.519282e-01  0.61594019 0.53809183     0.7428976    0.6438511
11 261.6847353 6.847890e+04 -2.0012049 0.045671510 -130.52915631 262.1831887 6.874002e+04 -0.49785479 0.61870856  -654.2139262  218.3141364
12 261.6847353 6.847890e+04 -2.0012049 0.045671510 -130.52915631 262.1831887 6.874002e+04 -0.49785479 0.61870856  -654.2139262  218.3141364
13 261.6847353 6.847890e+04 -2.0012049 0.045671510 -130.52915631 262.1831887 6.874002e+04 -0.49785479 0.61870856  -654.2139262  218.3141364
14 261.6847353 6.847890e+04 -2.0012049 0.045671510 -130.52915631 262.1831887 6.874002e+04 -0.49785479 0.61870856  -654.2139262  218.3141364
15 261.6847353 6.847890e+04 -2.0012049 0.045671510 -130.52915631 262.1831887 6.874002e+04 -0.49785479 0.61870856  -654.2139262  218.3141364
16 284.8850785 8.115951e+04 -2.6819687 0.007453708 -582.67953917 281.2007838 7.907388e+04 -2.07211207 0.03854056 -1346.7323910  217.0676282
17 284.8850785 8.115951e+04 -2.6819687 0.007453708 -582.67953917 281.2007838 7.907388e+04 -2.07211207 0.03854056 -1346.7323910  217.0676282
18 284.8850785 8.115951e+04 -2.6819687 0.007453708 -582.67953917 281.2007838 7.907388e+04 -2.07211207 0.03854056 -1346.7323910  217.0676282
19 284.8850785 8.115951e+04 -2.6819687 0.007453708 -582.67953917 281.2007838 7.907388e+04 -2.07211207 0.03854056 -1346.7323910  217.0676282
20 284.8850785 8.115951e+04 -2.6819687 0.007453708 -582.67953917 281.2007838 7.907388e+04 -2.07211207 0.03854056 -1346.7323910  217.0676282
21   0.4983177 2.483205e-01 -2.9994619 0.002780067    0.15152885   0.5148473 2.650678e-01  0.29431803 0.76858368    -1.3431561    0.6464200
22   0.4983177 2.483205e-01 -2.9994619 0.002780067    0.15152885   0.5148473 2.650678e-01  0.29431803 0.76858368    -1.3431561    0.6464200
23   0.4983177 2.483205e-01 -2.9994619 0.002780067    0.15152885   0.5148473 2.650678e-01  0.29431803 0.76858368    -1.3431561    0.6464200
24   0.4983177 2.483205e-01 -2.9994619 0.002780067    0.15152885   0.5148473 2.650678e-01  0.29431803 0.76858368    -1.3431561    0.6464200
25   0.4983177 2.483205e-01 -2.9994619 0.002780067    0.15152885   0.5148473 2.650678e-01  0.29431803 0.76858368    -1.3431561    0.6464200
26 285.9937972 8.179245e+04 -2.8228224 0.004865727 -575.21611221 278.1639935 7.737521e+04 -2.06790284 0.03893569 -1382.5258003  217.0494337
      variancej test_statj joint.eff.pvalue  rho mean_distance min_distance max_distance      model_name model_type model_call
1  4.109917e-01   1.934478     5.305439e-02 0.25      956.5667           89         2101 fixedeff_linear        reg         lm
2  4.109917e-01   1.934478     5.305439e-02 0.25      956.5667           89         2101 fixedeff_linear        reg         lm
3  4.109917e-01   1.934478     5.305439e-02 0.25      956.5667           89         2101 fixedeff_linear        reg         lm
4  4.109917e-01   1.934478     5.305439e-02 0.25      956.5667           89         2101 fixedeff_linear        reg         lm
5  4.109917e-01   1.934478     5.305439e-02 0.25      956.5667           89         2101 fixedeff_linear        reg         lm
6  4.145443e-01   1.153834     2.485681e-01 0.25      962.8333           92         1887 fixedeff_linear        reg         lm
7  4.145443e-01   1.153834     2.485681e-01 0.25      962.8333           92         1887 fixedeff_linear        reg         lm
8  4.145443e-01   1.153834     2.485681e-01 0.25      962.8333           92         1887 fixedeff_linear        reg         lm
9  4.145443e-01   1.153834     2.485681e-01 0.25      962.8333           92         1887 fixedeff_linear        reg         lm
10 4.145443e-01   1.153834     2.485681e-01 0.25      962.8333           92         1887 fixedeff_linear        reg         lm
11 4.766106e+04  -2.996663     2.729521e-03 0.25      962.8333           92         1887  autoreg_linear    autoreg         lm
12 4.766106e+04  -2.996663     2.729521e-03 0.25      962.8333           92         1887  autoreg_linear    autoreg         lm
13 4.766106e+04  -2.996663     2.729521e-03 0.25      962.8333           92         1887  autoreg_linear    autoreg         lm
14 4.766106e+04  -2.996663     2.729521e-03 0.25      962.8333           92         1887  autoreg_linear    autoreg         lm
15 4.766106e+04  -2.996663     2.729521e-03 0.25      962.8333           92         1887  autoreg_linear    autoreg         lm
16 4.711836e+04  -6.204207     5.497356e-10 0.25      956.5667           89         2101  autoreg_linear    autoreg         lm
17 4.711836e+04  -6.204207     5.497356e-10 0.25      956.5667           89         2101  autoreg_linear    autoreg         lm
18 4.711836e+04  -6.204207     5.497356e-10 0.25      956.5667           89         2101  autoreg_linear    autoreg         lm
19 4.711836e+04  -6.204207     5.497356e-10 0.25      956.5667           89         2101  autoreg_linear    autoreg         lm
20 4.711836e+04  -6.204207     5.497356e-10 0.25      956.5667           89         2101  autoreg_linear    autoreg         lm
21 4.178588e-01  -2.077838     3.772426e-02 0.25      932.4333            0         1522 fixedeff_linear        reg         lm
22 4.178588e-01  -2.077838     3.772426e-02 0.25      932.4333            0         1522 fixedeff_linear        reg         lm
23 4.178588e-01  -2.077838     3.772426e-02 0.25      932.4333            0         1522 fixedeff_linear        reg         lm
24 4.178588e-01  -2.077838     3.772426e-02 0.25      932.4333            0         1522 fixedeff_linear        reg         lm
25 4.178588e-01  -2.077838     3.772426e-02 0.25      932.4333            0         1522 fixedeff_linear        reg         lm
26 4.711046e+04  -6.369636     1.894778e-10 0.50      909.0667           31         1857  autoreg_linear    autoreg         lm
                                                                                              model_formula iter seed unit_var time_var rhos sim_id
1  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    2 9782    state     year 0.75     28
2  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    2 9782    state     year 0.50     20
3  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    2 9782    state     year 0.00      4
4  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    2 9782    state     year 0.90     36
5  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    2 9782    state     year 0.25     12
6  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    3 9782    state     year 0.75     28
7  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    3 9782    state     year 0.50     20
8  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    3 9782    state     year 0.00      4
9  crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    3 9782    state     year 0.90     36
10 crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    3 9782    state     year 0.25     12
11     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    3 9782    state     year 0.75     28
12     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    3 9782    state     year 0.50     20
13     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    3 9782    state     year 0.00      4
14     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    3 9782    state     year 0.90     36
15     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    3 9782    state     year 0.25     12
16     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    2 9782    state     year 0.75     28
17     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    2 9782    state     year 0.50     20
18     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    2 9782    state     year 0.00      4
19     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    2 9782    state     year 0.90     36
20     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    2 9782    state     year 0.25     12
21 crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    9 9782    state     year 0.75     28
22 crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    9 9782    state     year 0.50     20
23 crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    9 9782    state     year 0.00      4
24 crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    9 9782    state     year 0.90     36
25 crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    9 9782    state     year 0.25     12
26     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    2 9782    state     year 0.75     28
 [ reached 'max' / getOption("max.print") -- omitted 3974 rows ]
> unique(lm_results$sim_id)
 [1] 28 20  4 36 12 16 32 24  8 40  2 10 18 34 26  6 14 30 22 38  3 19 11 27 35 15  7 23 31 39  1 33 17  9 25 29  5 37 21 13
> sort(unique(lm_results$sim_id))
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40
> setDT(lm_results)
> lm_results[sim_id == 1,]
     effect_magnitude1 effect_magnitude2 n_units effect_direction policy_speed n_implementation_periods years_apart ordered se_adjustment    estimate1
  1:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   -1.9564441
  2:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  152.1600828
  3:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none    0.9681932
  4:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none -810.6411263
  5:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none    1.1980829
  6:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none -519.9963909
  7:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   -1.8307034
  8:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   94.6986175
  9:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   -1.2030476
 10:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none -113.7460271
 11:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none    2.3434270
 12:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none -268.8076619
 13:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   -1.4396839
 14:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  491.3264246
 15:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none    1.1622422
 16:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none -777.6979143
 17:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   -1.3800141
 18:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  100.1862996
 19:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none    1.5815043
 20:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  -36.0275610
 21:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   43.7408827
 22:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   -1.3351575
 23:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none   -2.4724465
 24:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  380.8781154
 25:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none    1.4785681
 26:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none -877.6425936
             se1    variance1 test_stat1     p_value1     estimate2         se2    variance2  test_stat2     p_value2     joint.eff joint.eff.se
  1:   0.4624898 2.138968e-01 -4.2302430 2.576663e-05    2.06099962   0.4846664 2.349015e-01  4.25240900 2.338920e-05     0.1045556    0.6408273
  2: 257.7178593 6.641849e+04  0.5904134 5.550624e-01  -39.89162972 256.8027123 6.594763e+04 -0.15533960 8.765886e-01   112.2684530  218.8628927
  3:   0.5632127 3.172086e-01  1.7190543 8.595299e-02    1.29302887   0.5522893 3.050234e-01  2.34121670 1.944136e-02     2.2612221    0.6402906
  4: 307.6233253 9.463211e+04 -2.6351744 8.554657e-03 -494.70729995 286.3917867 8.202026e+04 -1.72737950 8.444414e-02 -1305.3484262  216.9144858
  5:   0.5296609 2.805407e-01  2.2619809 2.393960e-02    0.51417366   0.5224339 2.729372e-01  0.98418897 3.252907e-01     1.7122565    0.6434295
  6: 266.3599590 7.094763e+04 -1.9522318 5.122182e-02 -212.51863835 258.9604844 6.706053e+04 -0.82066049 4.120580e-01  -732.5150292  217.6546166
  7:   0.4939405 2.439772e-01 -3.7063240 2.233116e-04    1.56181672   0.5072663 2.573191e-01  3.07888905 2.141622e-03    -0.2688867    0.6435782
  8: 240.8954454 5.803062e+04  0.3931109 6.943311e-01  375.92295522 243.1900814 5.914142e+04  1.54579888 1.225063e-01   470.6215727  218.3502377
  9:   0.4852617 2.354789e-01 -2.4791729 1.335339e-02    0.19707688   0.4799045 2.303083e-01  0.41065858 6.814220e-01    -1.0059707    0.6468575
 10: 246.8823695 6.095090e+04 -0.4607296 6.451044e-01   65.41939071 267.8159412 7.172538e+04  0.24426997 8.070777e-01   -48.3266364  218.4031282
 11:   0.5482532 3.005815e-01  4.2743520 2.124260e-05   -1.31619797   0.5610408 3.147668e-01 -2.34599339 1.919555e-02     1.0272290    0.6418787
 12: 252.4214592 6.371659e+04 -1.0649160 2.872008e-01 -320.96526109 266.0078168 7.076016e+04 -1.20660086 2.279044e-01  -589.7729230  218.0495445
 13:   0.4820852 2.324062e-01 -2.9863680 2.900674e-03   -1.95394910   0.4842144 2.344635e-01 -4.03529777 5.923167e-05    -3.3936330    0.6259886
 14: 254.0924115 6.456295e+04  1.9336525 5.347056e-02  401.36830638 250.3079469 6.265407e+04  1.60349806 1.091772e-01   892.6947310  217.8052747
 15:   0.4772686 2.277853e-01  2.4351949 1.507967e-02   -0.22852661   0.4493378 2.019044e-01 -0.50858533 6.111692e-01     0.9337155    0.6464399
 16: 251.4566581 6.323045e+04 -3.0927712 2.044405e-03 -129.28425769 241.1251243 5.814133e+04 -0.53617083 5.919736e-01  -906.9821720  216.9081314
 17:   0.5646361 3.188139e-01 -2.4440771 1.471594e-02    0.65534697   0.5764205 3.322606e-01  1.13692522 2.558762e-01    -0.7246671    0.6462370
 18: 259.5383823 6.736017e+04  0.3860173 6.995755e-01   33.31709644 272.5381283 7.427703e+04  0.12224747 9.027304e-01   133.5033961  218.1040897
 19:   0.5650998 3.193378e-01  2.7986283 5.243178e-03   -0.19752877   0.5678381 3.224402e-01 -0.34786104 7.280270e-01     1.3839755    0.6434228
 20: 250.3108263 6.265551e+04 -0.1439313 8.855871e-01 -166.82911215 249.1366279 6.206906e+04 -0.66962900 5.032668e-01  -202.8566731  218.0600552
 21: 268.7315495 7.221665e+04  0.1627679 8.707378e-01  365.83268310 250.9026688 6.295215e+04  1.45806613 1.451727e-01   409.5735658  218.4128495
 22:   0.4457036 1.986517e-01 -2.9956174 2.814994e-03    0.16200364   0.4384117 1.922048e-01  0.36952402 7.118253e-01    -1.1731538    0.6452945
 23:   0.4779065 2.283947e-01 -5.1734939 2.841122e-07    2.86981605   0.4901209 2.402185e-01  5.85532265 6.697847e-09     0.3973695    0.6351906
 24: 247.6822636 6.134650e+04  1.5377690 1.244581e-01 -183.01533582 259.0122630 6.708735e+04 -0.70658946 4.800053e-01   197.8627796  219.5090710
 25:   0.5683972 3.230754e-01  2.6012937 9.441821e-03    0.52198372   0.5703434 3.252916e-01  0.91520947 3.603301e-01     2.0005518    0.6419651
 26: 288.8307293 8.342319e+04 -3.0386053 2.445733e-03 -629.15042629 273.1707886 7.462228e+04 -2.30313947 2.149924e-02 -1506.7930199  216.4348060
        variancej test_statj joint.eff.pvalue  rho mean_distance min_distance max_distance      model_name model_type model_call
  1: 4.106597e-01  0.1631571     8.703947e-01 0.00      786.7667           30         2070 fixedeff_linear        reg         lm
  2: 4.790097e+04  0.5129625     6.079776e-01 0.00      786.7667           30         2070  autoreg_linear    autoreg         lm
  3: 4.099720e-01  3.5315560     4.131223e-04 0.00      923.4667            0         1795 fixedeff_linear        reg         lm
  4: 4.705189e+04 -6.0178020     1.768013e-09 0.00      923.4667            0         1795  autoreg_linear    autoreg         lm
  5: 4.140016e-01  2.6611408     7.787639e-03 0.00      920.3000          242         2345 fixedeff_linear        reg         lm
  6: 4.737353e+04 -3.3654927     7.640708e-04 0.00      920.3000          242         2345  autoreg_linear    autoreg         lm
  7: 4.141929e-01 -0.4177995     6.760937e-01 0.00      771.9667           92         1826 fixedeff_linear        reg         lm
  8: 4.767683e+04  2.1553518     3.113432e-02 0.00      771.9667           92         1826  autoreg_linear    autoreg         lm
  9: 4.184246e-01 -1.5551660     1.199065e-01 0.00      728.7333           31         1583 fixedeff_linear        reg         lm
 10: 4.769993e+04 -0.2212726     8.248802e-01 0.00      728.7333           31         1583  autoreg_linear    autoreg         lm
 11: 4.120083e-01  1.6003474     1.095215e-01 0.00      735.6000          153         2068 fixedeff_linear        reg         lm
 12: 4.754560e+04 -2.7047657     6.835259e-03 0.00      735.6000          153         2068  autoreg_linear    autoreg         lm
 13: 3.918617e-01 -5.4212376     5.918783e-08 0.00      551.8333           30         1553 fixedeff_linear        reg         lm
 14: 4.743914e+04  4.0985910     4.156729e-05 0.00      551.8333           30         1553  autoreg_linear    autoreg         lm
 15: 4.178845e-01  1.4443966     1.486275e-01 0.00      790.4333           61         1642 fixedeff_linear        reg         lm
 16: 4.704914e+04 -4.1814116     2.897049e-05 0.00      790.4333           61         1642  autoreg_linear    autoreg         lm
 17: 4.176223e-01 -1.1213643     2.621328e-01 0.00      771.9333           59         1642 fixedeff_linear        reg         lm
 18: 4.756939e+04  0.6121086     5.404659e-01 0.00      771.9333           59         1642  autoreg_linear    autoreg         lm
 19: 4.139929e-01  2.1509581     3.147951e-02 0.00      750.3000          153         2130 fixedeff_linear        reg         lm
 20: 4.755019e+04 -0.9302789     3.522267e-01 0.00      750.3000          153         2130  autoreg_linear    autoreg         lm
 21: 4.770417e+04  1.8752265     6.076157e-02 0.25      953.0000           61         1583  autoreg_linear    autoreg         lm
 22: 4.164050e-01 -1.8180131     6.906213e-02 0.25      916.2333          151         1765 fixedeff_linear        reg         lm
 23: 4.034671e-01  0.6255910     5.315832e-01 0.90      788.6333          458         1005 fixedeff_linear        reg         lm
 24: 4.818423e+04  0.9013877     3.673822e-01 0.90      788.6333          458         1005  autoreg_linear    autoreg         lm
 25: 4.121192e-01  3.1162937     1.831397e-03 0.90      803.6333          304         1247 fixedeff_linear        reg         lm
 26: 4.684403e+04 -6.9618794     3.357629e-12 0.90      803.6333          304         1247  autoreg_linear    autoreg         lm
                                                                                                model_formula iter seed unit_var time_var rhos sim_id
  1: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    1 9782    state     year    0      1
  2:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    1 9782    state     year    0      1
  3: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    2 9782    state     year    0      1
  4:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    2 9782    state     year    0      1
  5: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    3 9782    state     year    0      1
  6:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    3 9782    state     year    0      1
  7: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    4 9782    state     year    0      1
  8:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    4 9782    state     year    0      1
  9: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    5 9782    state     year    0      1
 10:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    5 9782    state     year    0      1
 11: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    6 9782    state     year    0      1
 12:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    6 9782    state     year    0      1
 13: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    7 9782    state     year    0      1
 14:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    7 9782    state     year    0      1
 15: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    8 9782    state     year    0      1
 16:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    8 9782    state     year    0      1
 17: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    9 9782    state     year    0      1
 18:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    9 9782    state     year    0      1
 19: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level   10 9782    state     year    0      1
 20:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate   10 9782    state     year    0      1
 21:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    4 9782    state     year    0      1
 22: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    5 9782    state     year    0      1
 23: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    1 9782    state     year    0      1
 24:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    1 9782    state     year    0      1
 25: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    2 9782    state     year    0      1
 26:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    2 9782    state     year    0      1
 [ reached getOption("max.print") -- omitted 75 rows ]
> lm_results[sim_id == 1,]$rhos
  [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 [74] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
> scenario1
[1] 0.4550925 0.4550925
> lm_results[sim_id == 1,]$se_adjustment
  [1] "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none"
 [21] "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none"
 [41] "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none"
 [61] "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none"
 [81] "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none" "none"
> lm_results[sim_id == 1 & iter == 1,]$se_adjustment
 [1] "none" "none" "none" "none" "none" "none" "none" "none" "none" "none"
> lm_results[sim_id == 1 & iter == 1,]
    effect_magnitude1 effect_magnitude2 n_units effect_direction policy_speed n_implementation_periods years_apart ordered se_adjustment  estimate1
 1:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  -1.956444
 2:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none 152.160083
 3:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  -2.472447
 4:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none 380.878115
 5:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  -2.308589
 6:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none 412.855605
 7:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  -2.430329
 8:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none  -2.407431
 9:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none 421.187785
10:         0.4550925         0.4550925      30             null      instant                        3           2    TRUE          none 384.128049
            se1    variance1 test_stat1     p_value1   estimate2         se2    variance2 test_stat2     p_value2   joint.eff joint.eff.se
 1:   0.4624898 2.138968e-01 -4.2302430 2.576663e-05    2.061000   0.4846664 2.349015e-01  4.2524090 2.338920e-05   0.1045556    0.6408273
 2: 257.7178593 6.641849e+04  0.5904134 5.550624e-01  -39.891630 256.8027123 6.594763e+04 -0.1553396 8.765886e-01 112.2684530  218.8628927
 3:   0.4779065 2.283947e-01 -5.1734939 2.841122e-07    2.869816   0.4901209 2.402185e-01  5.8553227 6.697847e-09   0.3973695    0.6351906
 4: 247.6822636 6.134650e+04  1.5377690 1.244581e-01 -183.015336 259.0122630 6.708735e+04 -0.7065895 4.800053e-01 197.8627796  219.5090710
 5:   0.4565037 2.083956e-01 -5.0571102 5.171288e-07    2.616317   0.4725557 2.233089e-01  5.5365269 4.063264e-08   0.3077281    0.6359406
 6: 255.5750423 6.531860e+04  1.6153988 1.065764e-01 -177.572512 269.3252240 7.253608e+04 -0.6593237 5.098573e-01 235.2830927  218.5635477
 7:   0.4673282 2.183957e-01 -5.2004753 2.468579e-07    2.829371   0.4831682 2.334515e-01  5.8558718 6.676570e-09   0.3990418    0.6350063
 8:   0.4620827 2.135204e-01 -5.2099577 2.349243e-07    2.785929   0.4776285 2.281290e-01  5.8328365 7.628089e-09   0.3784978    0.6348938
 9: 257.7280895 6.642377e+04  1.6342331 1.025612e-01 -233.488828 273.2350858 7.465741e+04 -0.8545346 3.930373e-01 187.6989564  218.9475260
10: 243.4757877 5.928046e+04  1.5776848 1.149910e-01 -198.952076 264.8532918 7.014727e+04 -0.7511784 4.527425e-01 185.1759731  219.3006507
       variancej test_statj joint.eff.pvalue  rho mean_distance min_distance max_distance      model_name model_type model_call
 1: 4.106597e-01  0.1631571        0.8703947 0.00      786.7667           30         2070 fixedeff_linear        reg         lm
 2: 4.790097e+04  0.5129625        0.6079776 0.00      786.7667           30         2070  autoreg_linear    autoreg         lm
 3: 4.034671e-01  0.6255910        0.5315832 0.90      788.6333          458         1005 fixedeff_linear        reg         lm
 4: 4.818423e+04  0.9013877        0.3673822 0.90      788.6333          458         1005  autoreg_linear    autoreg         lm
 5: 4.044205e-01  0.4838944        0.6284608 0.25      909.2667          181         1402 fixedeff_linear        reg         lm
 6: 4.777002e+04  1.0764974        0.2817049 0.25      909.2667          181         1402  autoreg_linear    autoreg         lm
 7: 4.032330e-01  0.6284060        0.5297380 0.75      827.9000          396         1126 fixedeff_linear        reg         lm
 8: 4.030902e-01  0.5961592        0.5510689 0.50      872.6333          243         1279 fixedeff_linear        reg         lm
 9: 4.793802e+04  0.8572783        0.3912911 0.50      872.6333          243         1279  autoreg_linear    autoreg         lm
10: 4.809278e+04  0.8443932        0.3984497 0.75      827.9000          396         1126  autoreg_linear    autoreg         lm
                                                                                               model_formula iter seed unit_var time_var rhos sim_id
 1: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    1 9782    state     year    0      1
 2:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    1 9782    state     year    0      1
 3: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    1 9782    state     year    0      1
 4:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    1 9782    state     year    0      1
 5: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    1 9782    state     year    0      1
 6:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    1 9782    state     year    0      1
 7: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    1 9782    state     year    0      1
 8: crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + treatment1_level + treatment2_level    1 9782    state     year    0      1
 9:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    1 9782    state     year    0      1
10:     deaths ~ unemploymentrate + as.factor(year) + treatment1_change + treatment2_change + lag_crude.rate    1 9782    state     year    0      1
> t <- 1:100
> discount <- function(x, t){1/((1 + x)^t)}
> plot(discount(0.06, t))
> curve(discount(0.04, t)
+ )
Error in curve(discount(0.04, t)) : 
  'expr' must be a function, or a call or an expression containing 'x'
> plot(discount(0.06, t), type = "l")
> lines(discount(0.04, t)
+ )
> plot(discount(0.06, t), type = "l", col = "red")
> lines(discount(0.04, t), col = "green")
> t <- 1:20
> plot(discount(0.06, t), type = "l", col = "red")
> lines(discount(0.04, t), col = "green")
> models
Error: object 'models' not found
> my_models
[[1]]
[[1]]$name
[1] "fixedeff_linear"

[[1]]$type
[1] "reg"

[[1]]$model_call
[1] "lm"

[[1]]$model_formula
crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + 
    treatment1_level + treatment2_level

[[1]]$model_args
[[1]]$model_args$weights
population


[[1]]$se_adjust
[1] "none"


[[2]]
[[2]]$name
[1] "autoreg_linear"

[[2]]$type
[1] "autoreg"

[[2]]$model_call
[1] "lm"

[[2]]$model_formula
deaths ~ unemploymentrate + as.factor(year) + treatment1_change + 
    treatment2_change

[[2]]$model_args
[[2]]$model_args$weights
population


[[2]]$se_adjust
[1] "none"


> my_models[[1]]
$name
[1] "fixedeff_linear"

$type
[1] "reg"

$model_call
[1] "lm"

$model_formula
crude.rate ~ unemploymentrate + as.factor(year) + as.factor(state) + 
    treatment1_level + treatment2_level

$model_args
$model_args$weights
population


$se_adjust
[1] "none"

> my_models[[2]]
$name
[1] "autoreg_linear"

$type
[1] "autoreg"

$model_call
[1] "lm"

$model_formula
deaths ~ unemploymentrate + as.factor(year) + treatment1_change + 
    treatment2_change

$model_args
$model_args$weights
population


$se_adjust
[1] "none"

> t <- 50
